<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	template="../layout/template.xhtml">

	<ui:define name="body">
		<h:form>
			<ui:include src="/Source/search.xhtml" />
			<h:panelGrid columns="2"
				columnClasses="colAlignTop,colAlignTopWidth2" width="100%">
				<h:panelGrid columns="1" width="100%" columnClasses="colAlignTop">
					<rich:panel>
						<rich:dataGrid id="categoryList" style="heigh:400px;"
							value="#{productImpl.categoryList}" var="category" columns="4"
							elements="12" columnClasses="dataGridBorder" width="100%"
							rowClasses="dataGridBorder" styleClass="dataGridBorder">
							<rich:panel styleClass="CataloguePanel"
								rendered="#{category.categoryName != ''}" id="catalogueId"
								onmouseover="document.getElementById(this.id).style.background='#FFECCC'"
								onmouseout="document.getElementById(this.id).style.background=''">

								<h:graphicImage value="/img/product/category/#{category.img}"
									styleClass="cataloguePanelImage" />
								<br />
								<br />
								<h:panelGrid styleClass="CataloguePanel1">
									<h:outputText value="#{category.categoryName}" />
								</h:panelGrid>
								<a4j:support event="onclick"
									actionListener="#{productImpl.updateCategoryParam}"
									action="#{productImpl.checkCategory}" ajaxSingle="true">
									<f:attribute name="categoryId" value="#{category.categoryId}" />
								</a4j:support>
							</rich:panel>
							<rich:panel style="border:0;"
								rendered="#{category.categoryName eq ''}">
								<h:panelGrid styleClass="CataloguePanel1" />
							</rich:panel>
						</rich:dataGrid>
						<h:panelGroup
							rendered="#{fn:length(productImpl.categoryList) > productImpl.defaultSize}">
							<rich:spacer height="10" />
							<h:panelGrid columns="2" width="80%">
								<h:outputLabel
									value="Total Results (#{fn:length(productImpl.categoryList)})" />
								<rich:datascroller for="categoryList" renderIfSinglePage="false">
								</rich:datascroller>
							</h:panelGrid>
						</h:panelGroup>
						<h:outputLabel value="The search returned no results."
							rendered="#{empty productImpl.categoryList}" />
					</rich:panel>
				</h:panelGrid>

				<h:panelGroup>
					<ui:include src="/Source/cartBar.xhtml" />
				</h:panelGroup>
			</h:panelGrid>
		</h:form>
	</ui:define>
</ui:composition>
