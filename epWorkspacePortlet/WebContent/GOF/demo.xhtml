<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

	<rich:tabPanel switchType="client" selectedTab="Header" width="100%">

		<rich:tab label="#{messages['header']}" name="Header">

			<h:panelGrid columns="2" columnClasses="colAlignTop,colAlignTop"
				width="100%">

				<rich:panel styleClass="formPanel">
					<f:facet name="header">#{messages['ministry.information']}</f:facet>

					<h:panelGrid columns="3">
						<h:outputLabel value="#{messages['ministry']}" />
						<rich:spacer width="5"/>
						<h:inputText value="#{taskImpl.requisition.ministry}" size="50" />

						<h:outputLabel for="input2" value="#{messages['department']}" />
						<rich:spacer width="5"/>
						<h:inputText id="input2"
							value="#{taskImpl.requisition.department}" size="50" />

						<h:outputLabel value="#{messages['division']}"/>
						<rich:spacer width="5"/>
						<h:inputText value="#{taskImpl.requisition.division}" size="50" />

						<h:outputLabel value="#{messages['address']}"/>
						<rich:spacer width="5"/>
						<h:panelGrid columns="1" width="100%">
							<h:inputText value="#{taskImpl.requisition.address1}" size="50" />
							<h:inputText value="#{taskImpl.requisition.address2}" size="50" />
							<h:inputText value="#{taskImpl.requisition.address3}" size="50" />
						</h:panelGrid>

						<h:outputLabel value="#{messages['requisitioner']}" />
						<rich:spacer width="5"/>
						<h:inputText value="#{taskImpl.requisition.requisitioner}"
							size="50" />
					</h:panelGrid>
					<div style="clear: both" />
				</rich:panel>

				<rich:panel styleClass="formPanel">
					<f:facet name="header">#{messages['charge.account']}</f:facet>

					<h:panelGrid columns="3">
						<h:outputLabel value="#{messages['jabatan']}" />
						<rich:spacer width="5"/>
						<h:inputText value="#{taskImpl.requisition.chargeJabatanName}" />

						<h:outputLabel value="#{messages['ptj']}" />
						<rich:spacer width="5"/>
						<h:inputText value="#{taskImpl.requisition.chargePtjName}" />

						<h:outputLabel value="#{messages['maksud']}" />
						<rich:spacer width="5"/>
						<h:inputText value="#{taskImpl.requisition.chargeMaksudName}" />

						<h:outputLabel value="#{messages['mode.of.financing.loan']}" />
						<rich:spacer width="5"/>
						<h:inputText value="#{taskImpl.requisition.chargeFinancingLoan}" />

						<h:outputLabel value="#{messages['accountant.general.office']}" />
						<rich:spacer width="5"/>
						<h:inputText value="#{taskImpl.requisition.chargeAGCName}" />

						<h:outputLabel value="#{messages['financial.year']}" />
						<rich:spacer width="5"/>
						<h:inputText value="#{taskImpl.requisition.chargeFinancialYear}" />
					</h:panelGrid>
					<div style="clear: both" />
				</rich:panel>

				<rich:panel styleClass="formPanel">
					<f:facet name="header">#{messages['status']}</f:facet>

					<h:panelGrid columns="3">
						<h:outputLabel value="#{messages['status']}" />
						<rich:spacer width="5"/>
						<h:inputText value="#{taskImpl.requisition.status}" size="50" />

						<h:outputLabel value="#{messages['date.created']}" />
						<rich:spacer width="5"/>
						<rich:calendar value="#{taskImpl.requisition.dateCreated}"
							datePattern="dd/MM/yyyy" inputSize="10" />

						<h:outputLabel value="#{messages['requisition.no']}" />
						<rich:spacer width="5"/>
						<h:inputText value="#{taskImpl.requisition.requisitionNO}"
							size="50" />
					</h:panelGrid>
					<div style="clear: both" />
				</rich:panel>

				<rich:panel styleClass="formPanel">
					<f:facet name="header">#{messages['received.account']}</f:facet>

					<h:panelGrid columns="3">
						<h:outputLabel value="#{messages['jabatan']}" size="50" />
						<rich:spacer width="5"/>
						<h:inputText value="#{taskImpl.requisition.recJabatanName}" />

						<h:outputLabel value="#{messages['ptj']}" />
						<rich:spacer width="5"/>
						<h:inputText value="#{taskImpl.requisition.recPtjName}" />
					</h:panelGrid>
					<div style="clear: both" />
				</rich:panel>


			</h:panelGrid>
		</rich:tab>

		<rich:tab label="Line" name="Line">

			<div class="sample-container">
				<h:commandButton value="Copy"
					action="#{taskImpl.addTaskItemDetails}">
					<a4j:support event="onclick" ajaxSingle="true" reRender="lineItem" />
				</h:commandButton>
				<h:commandButton value="Delete"
					action="#{taskImpl.removeTaskItemDetails}">
					<a4j:support event="onclick" ajaxSingle="true" reRender="lineItem" />
				</h:commandButton>
			</div>
			<rich:spacer height="10" />

			<rich:dataTable id="lineItem"
				onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
				onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
				cellpadding="0" cellspacing="0" border="0" var="record"
				value="#{taskImpl.requisition.taskItemList}">

				<f:facet name="header">
					<rich:columnGroup>
						<rich:column rowspan="2">
							<h:outputText value="" />
						</rich:column>
						<rich:column rowspan="2">
							<h:outputText value="No" />
						</rich:column>
						<rich:column rowspan="2">
							<h:outputText value="EP Product" />
						</rich:column>
						<rich:column rowspan="2">
							<h:outputText value="Product Name" />
						</rich:column>
						<rich:column rowspan="2">
							<h:outputText value="Delivery Address" />
						</rich:column>
						<rich:column rowspan="2">
							<h:outputText value="Order Quantity" />
						</rich:column>
					</rich:columnGroup>
				</f:facet>

				<rich:column>
					<h:selectBooleanCheckbox id="checked" value="#{record.checked}"
						immediate="true">
						<a4j:support event="onclick" ajaxSingle="true" reRender="checked" />
					</h:selectBooleanCheckbox>
				</rich:column>
				<rich:column sortBy="#{record.no}" sortOrder="ASCENDING">
					<h:outputText value="#{record.no}" />
				</rich:column>
				<rich:column>
					<h:outputText value="#{record.ePProductNo}" />
				</rich:column>
				<rich:column>
					<h:outputText value="#{record.productName}" />
				</rich:column>
				<rich:column>
					<h:panelGrid columns="1">
						<h:inputText id="deliveryAddress" value="#{record.address}"
							disabled="#{!record.othersAddress}" size="100" />
						<h:panelGrid columns="3">
							<h:panelGroup>
								<rich:comboBox
									value="#{taskImpl.requisition.newDeliveryAddress}"
									suggestionValues="#{taskImpl.deliveryAddressList}"
									directInputSuggestions="false" immediate="true">
									<a4j:support event="onselect" ajaxSingle="true"
										reRender="deliveryAddress"
										action="#{taskImpl.changeDeliveryAddress}">
										<f:param name="recordNo" value="#{record.no}" />
									</a4j:support>
								</rich:comboBox>
							</h:panelGroup>
							<rich:spacer width="5"/>
							<h:panelGroup>
								<h:selectBooleanCheckbox value="#{record.othersAddress}"
									immediate="true">
									<a4j:support event="onclick" ajaxSingle="true"
										reRender="deliveryAddress" />
								</h:selectBooleanCheckbox>
								<h:outputText value="Others" styleClass="outputText" />
							</h:panelGroup>
						</h:panelGrid>
					</h:panelGrid>
					<rich:spacer height="5"/>
				</rich:column>
				<rich:column>
					<rich:inputNumberSpinner value="#{record.orderQuantity}"
						maxValue="9999999999" minValue="1" immediate="true">
						<a4j:support event="onchange" reRender="deliveryItem" />
					</rich:inputNumberSpinner>
				</rich:column>
			</rich:dataTable>
		</rich:tab>

		<rich:tab label="Delivery" name="Delivery" reRender="deliveryItem">

			<rich:dataTable onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
				id="deliveryItem"
				onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
				cellpadding="0" cellspacing="0" width="700" border="0" var="record"
				value="#{taskImpl.requisition.taskItemList}">

				<f:facet name="header">
					<rich:columnGroup>
						<rich:column rowspan="2">
							<h:outputText value="No" />
						</rich:column>
						<rich:column rowspan="2">
							<h:outputText value="EP Product" />
						</rich:column>
						<rich:column rowspan="2">
							<h:outputText value="Supplier SKU" />
						</rich:column>
						<rich:column rowspan="2">
							<h:outputText value="Contract No." />
						</rich:column>
						<rich:column rowspan="2">
							<h:outputText value="Delivery Period" />
						</rich:column>
						<rich:column rowspan="2">
							<h:outputText value="Product Name" />
						</rich:column>
						<rich:column colspan="3">
							<h:outputText value="Expected Delivery" />
						</rich:column>
						<rich:column rowspan="2">
							<h:outputText value="UOM" />
						</rich:column>
						<rich:column rowspan="2">
							<h:outputText value="Unit Price (RM)" />
						</rich:column>
						<rich:column rowspan="2">
							<h:outputText value="Order Quantity" />
						</rich:column>
						<rich:column rowspan="2">
							<h:outputText value="Total (RM)" />
						</rich:column>
						<rich:column breakBefore="true">
							<h:outputText value="Date (dd/mm/yyyy)" />
						</rich:column>
						<rich:column>
							<h:outputText value="Time (From)" />
						</rich:column>
						<rich:column>
							<h:outputText value="Time (To)" />
						</rich:column>
					</rich:columnGroup>
				</f:facet>


				<rich:column sortBy="#{record.no}" sortOrder="ASCENDING">
					<h:outputText value="#{record.no}" />
				</rich:column>
				<rich:column>
					<h:outputText value="#{record.ePProductNo}" />
				</rich:column>
				<rich:column>
					<h:outputText value="#{record.supplierSKU}" />
				</rich:column>
				<rich:column>
					<h:outputText value="#{record.contractNo}" />
				</rich:column>
				<rich:column>
					<h:outputText value="#{record.deliveryPeriod}" />
				</rich:column>
				<rich:column>
					<h:outputText value="#{record.productName}" />
				</rich:column>
				<rich:column>
					<rich:calendar value="#{record.edDate}" datePattern="dd/MM/yyyy"
						inputSize="10" />
				</rich:column>
				<rich:column>
					<h:inputText value="#{record.expectedTimeFrom}" size="5" />
				</rich:column>
				<rich:column>
					<h:inputText value="#{record.expectedTimeTo}" size="5" />
				</rich:column>
				<rich:column>
					<h:outputText value="#{record.unitOfMeasurement}" />
				</rich:column>
				<rich:column>
					<h:outputText value="#{record.unitPrice}">
						<f:convertNumber type="number" pattern="#0.00" />
					</h:outputText>
				</rich:column>
				<rich:column>
					<h:outputText value="#{record.orderQuantity}" />
				</rich:column>
				<rich:column>
					<h:outputText id="totalValue" value="#{record.total}">
						<f:convertNumber type="number" pattern="#0.00" />
					</h:outputText>
				</rich:column>

				<f:facet name="footer">

					<rich:columnGroup>
						<rich:column colspan="11" />
						<rich:column>Grand Total</rich:column>
						<rich:column>
							<h:outputText id="grandTotal" value="#{taskImpl.totalPurchase}">
								<f:convertNumber type="number" pattern="#0.00" />
							</h:outputText>
						</rich:column>
					</rich:columnGroup>
				</f:facet>

			</rich:dataTable>

		</rich:tab>

	</rich:tabPanel>

</ui:composition>